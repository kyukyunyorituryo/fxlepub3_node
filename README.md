# Image Fixed-Layout EPUB Generator (JP)

ç”»åƒãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰ **æ—¥æœ¬èªå‘ã‘å›ºå®šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆEPUBï¼ˆEPUB3ï¼‰** ã‚’ç”Ÿæˆã™ã‚‹ Node.js ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã™ã€‚  
ä¸»ã« **è‡ªç‚Šã‚¹ã‚­ãƒ£ãƒ³ç”»åƒãƒ»æ¼«ç”»ãƒ»å†™çœŸé›†** ãªã©ã‚’ EPUB åŒ–ã™ã‚‹ç”¨é€”ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚

- è¡¨ç´™ç”»åƒï¼ˆ`cover.*`ï¼‰å¯¾å¿œ
- EJS ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã‚ˆã‚‹ EPUB æ§‹é€ ç”Ÿæˆ
- ç›®æ¬¡ï¼ˆnav.xhtml / toc.ncxï¼‰ç”Ÿæˆ
- ç¸¦æ›¸ããƒ»å³é–‹ãï¼ˆæ—¥æœ¬èªå›ºå®šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼‰å¯¾å¿œ

---

## ç‰¹å¾´

- ğŸ“˜ **EPUB3 å›ºå®šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆFixed Layoutï¼‰**
- ğŸ—‚ **ãƒ•ã‚©ãƒ«ãƒ€å†…ç”»åƒã‚’è‡ªç„¶é †ã‚½ãƒ¼ãƒˆ**
- ğŸ–¼ **ç”»åƒã‚µã‚¤ã‚ºè‡ªå‹•å–å¾—**
- ğŸ“‘ **ç›®æ¬¡ï¼ˆç›®æ¬¡ï¼‹ãƒšãƒ¼ã‚¸ç´ä»˜ã‘ï¼‰ç”Ÿæˆ**
- ğŸ“¦ **JSZip ã«ã‚ˆã‚‹ EPUB ç›´æ¥ç”Ÿæˆ**
- ğŸ‡¯ğŸ‡µ **æ—¥æœ¬èªæ›¸ç±ï¼ˆå³é–‹ããƒ»ç¸¦æ›¸ãï¼‰å¯¾å¿œè¨­è¨ˆ**

---

## å‹•ä½œç’°å¢ƒ

- Node.js **18 ä»¥ä¸Šæ¨å¥¨**
- CommonJSï¼ˆ`require`ï¼‰ç’°å¢ƒ

---

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install ejs jszip uuid file-type image-size natural-orderby
```

---

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆä¾‹

```css
project/
â”œâ”€ index.js           # ã“ã®ã‚³ãƒ¼ãƒ‰
â”œâ”€ templete/
â”‚  â”œâ”€ container.xml
â”‚  â”œâ”€ fixed-layout-jp.css
â”‚  â”œâ”€ page.ejs
â”‚  â”œâ”€ opf.ejs
â”‚  â”œâ”€ nav.ejs
â”‚  â”œâ”€ tocncx.ejs
â”‚  â””â”€ cover.ejs
â””â”€ images/
   â”œâ”€ cover.jpg
   â”œâ”€ 001.jpg
   â”œâ”€ 002.jpg
   â””â”€ 003.jpg
```

â€» `templete` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã¯ã‚³ãƒ¼ãƒ‰ä»•æ§˜é€šã‚Šã§ã™ï¼ˆ`template` ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰ã€‚

---

## ä½¿ã„æ–¹

### åŸºæœ¬ä¾‹

```js
var epub = require('./fxlepub3.js'); 

var data={
//"url":"C:\Users\Owner\Downloads\comic\testdata",
"url":"D:/Download/comic/testdata/",
//D:\Download\comic\testdata
"output":'C:/Users/Owner/Downloads/out.epub',
"title": "ã‚¿ã‚¤ãƒˆãƒ«",
"author1": "è‘—è€…å1",
"index": [
    ["001.jpg", "ç›®æ¬¡"],
    ["12.jpg", "æœ€çµ‚ãƒšãƒ¼ã‚¸"]
    ],
"page_direction": "ltr",
"panel_view": "vertical-lr",
}
epub.gen(data)
```

---

## å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ä»•æ§˜ï¼ˆ`data`ï¼‰

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å‹ | èª¬æ˜ |
| --- | --- | --- |
| `title` | string | æ›¸ç±ã‚¿ã‚¤ãƒˆãƒ« |
| `author1` | string | è‘—è€…å |
| `author2` | string | è‘—è€…åï¼ˆä»»æ„ï¼‰ |
| `url` | string | ç”»åƒãƒ•ã‚©ãƒ«ãƒ€ãƒ‘ã‚¹ |
| `output` | string | å‡ºåŠ›EPUBãƒ‘ã‚¹ |
| `panel_view` | string | ãƒšãƒ¼ã‚¸è¡¨ç¤ºæ–¹å¼ï¼ˆä¾‹: `spread`ï¼‰ |
| `page_direction` | string | ãƒšãƒ¼ã‚¸æ–¹å‘ï¼ˆ`rtl` / `ltr`ï¼‰ |
| `index` | array | ç›®æ¬¡å®šç¾©é…åˆ— |

### `index` ã®å½¢å¼

```js
[
  ['cover.jpg', 'è¡¨ç´™'],
  ['001.jpg', 'ç¬¬1ç« '],
  ['002.jpg', 'ç¬¬2ç« '],
]
```

-   `index[0]` ã¯å¿…ãš **è¡¨ç´™**
    
-   ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«åã¨è¡¨ç¤ºã‚¿ã‚¤ãƒˆãƒ«ã‚’å¯¾å¿œã•ã›ã¾ã™
    

---

## è¡¨ç´™ç”»åƒã«ã¤ã„ã¦

-   ãƒ•ã‚¡ã‚¤ãƒ«åã¯ **`cover.(jpg|png|webp...)`**
    
-   è¡¨ç´™ç”»åƒãŒå­˜åœ¨ã—ãªã„å ´åˆã€ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™
    

```text
Error: cover ç”»åƒãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“
```

---

## ç”Ÿæˆã•ã‚Œã‚‹EPUBæ§‹æˆ

```css
EPUB/
â”œâ”€ mimetype
â”œâ”€ META-INF/
â”‚  â””â”€ container.xml
â””â”€ item/
   â”œâ”€ standard.opf
   â”œâ”€ nav.xhtml
   â”œâ”€ toc.ncx
   â”œâ”€ style/
   â”‚  â””â”€ fixed-layout-jp.css
   â”œâ”€ image/
   â”‚  â”œâ”€ cover.jpg
   â”‚  â”œâ”€ i-001.jpg
   â”‚  â””â”€ i-002.jpg
   â””â”€ xhtml/
      â”œâ”€ p-cover.xhtml
      â”œâ”€ p-001.xhtml
      â””â”€ p-002.xhtml
```

---

## æ³¨æ„ç‚¹

-   **å›ºå®šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå°‚ç”¨**ï¼ˆãƒªãƒ•ãƒ­ãƒ¼å‹ã«ã¯éå¯¾å¿œï¼‰
    
-   Kindle / Apple Books / Kobo å‘ã‘ã‚’æƒ³å®š
    
-   EPUB ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¯åˆ¥é€” `epubcheck` æ¨å¥¨
    
-   ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ç”¨é€”ã«å¿œã˜ã¦è‡ªç”±ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ãã ã•ã„
    

## æƒ³å®šç”¨é€”

-   è‡ªç‚Šã‚¹ã‚­ãƒ£ãƒ³EPUBåŒ–
    
-   æ¼«ç”»ãƒ»ç”»é›†ãƒ»å†™çœŸé›†
    
-   PDFå¤‰æ›å‰æ®µã®ç”»åƒEPUBç”Ÿæˆ
